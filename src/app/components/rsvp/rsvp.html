<section id="rsvp" class="rsvp-section">
  <div class="container">
    <h2>Confirma tu asistencia</h2>
    <p class="rsvp-intro">Tu presencia hará que este día sea aún más especial</p>
    
    <div class="loading-message" *ngIf="isLoading">
      <div class="spinner"></div>
      <h3>Enviando tu respuesta...</h3>
      <p>Por favor espera un momento</p>
    </div>
    
    <div class="confirmation-message" *ngIf="showConfirmation">
      <h3>¡Gracias por confirmar tu asistencia!</h3>
      <p>Hemos recibido tu respuesta correctamente.</p>
      <button class="submit-btn" (click)="resetForm()">
        Enviar otra respuesta
      </button>
    </div>
    
    <form class="rsvp-form" (ngSubmit)="onSubmit()" *ngIf="!showConfirmation && !isLoading">
      <div class="form-group">
        <label for="name">Nombre completo</label>
        <input 
          type="text" 
          id="name" 
          [(ngModel)]="formData.name" 
          name="name" 
          required 
          placeholder="Ingresa tu nombre completo"
          #nameField="ngModel"
          [class.error]="isNameInvalid()"
        >
        <div class="error-message" *ngIf="isNameInvalid()">
          Este campo es obligatorio
        </div>
      </div>
      
      <div class="form-group">
        <label>¿Asistirás a nuestra boda?</label>
        <div class="radio-group" [class.error]="isAttendingInvalid()">
          <label class="radio-option">
            <input 
              type="radio" 
              [(ngModel)]="formData.attending" 
              name="attending" 
              value="true" 
              required
              #attendingField="ngModel"
            >
            <span class="radio-custom">
              <img src="heart.svg" alt="" class="heart-icon">
            </span>
            Sí, estaré ahí
          </label>
          <label class="radio-option">
            <input 
              type="radio" 
              [(ngModel)]="formData.attending" 
              name="attending" 
              value="false" 
              required
              #attendingField="ngModel"
            >
            <span class="radio-custom">
              <img src="heart.svg" alt="" class="heart-icon">
            </span>
            No podré asistir
          </label>
        </div>
        <div class="error-message" *ngIf="isAttendingInvalid()">
          Este campo es obligatorio
        </div>
      </div>
      
      <div class="form-group" *ngIf="formData.attending === 'true'">
        <label>Número de invitados (incluyéndote)</label>
        <div class="radio-group">
          <label class="radio-option">
            <input 
              type="radio" 
              [(ngModel)]="formData.guests" 
              name="guests" 
              value="1" 
              required
            >
            <span class="radio-custom">
              <img src="heart.svg" alt="" class="heart-icon">
            </span>
            1 persona
          </label>
          <label class="radio-option">
            <input 
              type="radio" 
              [(ngModel)]="formData.guests" 
              name="guests" 
              value="2" 
              required
            >
            <span class="radio-custom">
              <img src="heart.svg" alt="" class="heart-icon">
            </span>
            2 personas
          </label>
        </div>
        <div class="error-message" *ngIf="isGuestsInvalid()">
          Este campo es obligatorio
        </div>
      </div>
      
      <div class="form-group">
        <label for="message">Mensaje para los novios (opcional)</label>
        <textarea 
          id="message" 
          [(ngModel)]="formData.message" 
          name="message" 
          rows="4" 
          placeholder="Comparte tus buenos deseos..."
        ></textarea>
      </div>
      
      <button type="submit" class="submit-btn" [disabled]="!isFormValid()">
        Confirmar respuesta
      </button>
    </form>
  </div>
</section>
